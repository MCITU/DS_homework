syntax = "proto3";
option go_package = "grpc/proto";

service ITUDatabase {
  //Request to enter at time T
  rpc sendRequest(accessRequest) returns (confirm);

  //Granted permission at time T
  rpc sendReply(accessReply) returns (confirm);

  //Exited at time T
  rpc sendLeave(leaveNotice) returns (confirm);
}

message accessRequest {
  string node_id = 1;
  uint64 lamport_timestamp = 2;
  int64 queue_id = 3;
}

message accessReply {
  string node_id = 1;
  uint64 lamport_timestamp = 2;
  string to_node = 3;
  bool granted = 4;
}

message leaveNotice {
  string node_id = 1;
  uint64 lamport_timestamp = 2;
}

message confirm{}


